<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-zio-prelude docs-doc-id-functionaldatatypes/zset">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">ZSet | ZIO</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zio.dev/zio-prelude/functionaldatatypes/zset"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-zio-prelude-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-zio-prelude-current"><meta data-rh="true" property="og:title" content="ZSet | ZIO"><meta data-rh="true" name="description" content="ZSet is a version of a set that generalizes the measure of &quot;how many times&quot; each element appears in the set."><meta data-rh="true" property="og:description" content="ZSet is a version of a set that generalizes the measure of &quot;how many times&quot; each element appears in the set."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://zio.dev/zio-prelude/functionaldatatypes/zset"><link data-rh="true" rel="alternate" href="https://zio.dev/zio-prelude/functionaldatatypes/zset" hreflang="en"><link data-rh="true" rel="alternate" href="https://zio.dev/zio-prelude/functionaldatatypes/zset" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://IAX8GRSWEQ-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-237088290-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SH0HNKLNRT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SH0HNKLNRT",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ZIO" href="/opensearch.xml">
















































<link rel="stylesheet" href="/css/prism/prism-material-dark.css"><link rel="stylesheet" href="/assets/css/styles.3ac761dc.css">
<link rel="preload" href="/assets/js/runtime~main.bc56e133.js" as="script">
<link rel="preload" href="/assets/js/main.45687b07.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/overview/">Overview</a><a class="navbar__item navbar__link" href="/reference/">Reference</a><a class="navbar__item navbar__link" href="/guides/">Guides</a><a class="navbar__item navbar__link" href="/ecosystem/">Ecosystem</a><a class="navbar__item navbar__link" href="/resources/">Resources</a><a class="navbar__item navbar__link" href="/about/">About</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/overview/">ZIO 2.x</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/overview/">ZIO 2.x</a></li><li><a class="dropdown__link" href="/version-1.x/overview/">ZIO 1.x</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zio-prelude/">ZIO Prelude</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zio-prelude/abstraction-diagrams">Abstraction Diagrams</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/zio-prelude/functionalabstractions/">Functional Abstractions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Functional Abstractions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/">Concrete Types</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concrete Types&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/associative">Associative</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/commutative">Commutative</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/debug">Debug</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/equal">Equal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/hash">Hash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/identity">Identity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/inverse">Inverse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/concretetypes/ord">Ord</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/">Parameterized Types</a><button aria-label="Toggle the collapsible sidebar category &#x27;Parameterized Types&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/associativeboth">AssociativeBoth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/associativeeither">AssociativeEither</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/associativeflatten">AssociativeFlatten</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/commutativeboth">CommutativeBoth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/commutativeeither">CommutativeEither</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/contravariant">Contravariant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/covariant">Covariant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/foreach">ForEach</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/identityboth">IdentityBoth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/identityeither">IdentityEither</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/identityflatten">IdentityFlatten</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/invariant">Invariant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionalabstractions/parameterizedtypes/nonemptyforeach">NonEmptyForEach</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/zio-prelude/functionaldatatypes/">Functional Data Types</a><button aria-label="Toggle the collapsible sidebar category &#x27;Functional Data Types&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionaldatatypes/equivalence">Equivalence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionaldatatypes/nonemptylist">NonEmptyList</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionaldatatypes/these">These</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionaldatatypes/validation">Validation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zio-prelude/functionaldatatypes/zset">ZSet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zio-prelude/functionaldatatypes/zvalidation">ZValidation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zio-prelude/newtypes/">New Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zio-prelude/zpure/">ZPure</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zio-prelude/functionaldatatypes/"><span itemprop="name">Functional Data Types</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ZSet</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ZSet</h1></header><p><code>ZSet</code> is a version of a set that generalizes the measure of &quot;how many times&quot; each element appears in the set.</p><p>Conceptually, we can think of a <code>ZSet[A, B]</code> as a <code>Map[A, B]</code>, where <code>A</code> represents the elements of the set and <code>B</code> represents some notion of how many times each element appears.</p><p>We can then define a <code>Set</code> as a <code>ZSet</code> where the measure of how many times each element appears is a <code>Boolean</code>.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token namespace">zio</span><span class="token namespace punctuation">.</span><span class="token namespace">prelude</span><span class="token namespace punctuation">.</span><span class="token plain">ZSet</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> Set</span><span class="token punctuation">[</span><span class="token operator">+</span><span class="token plain">A</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token plain">A</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That is, in a <code>Set</code> the measure of how many times an element appears is just yes or no. Either the element is in the set or it is not.</p><p>However, we can also define many other variants of sets by choosing different types to measure how many times an element appears.</p><p>For example, by using the <code>Natural</code> new type from ZIO Prelude, which describes integers greater than or equal to zero, we can define the type of a <code>MultiSet</code> or &quot;bag&quot; in some programming languages.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token namespace">zio</span><span class="token namespace punctuation">.</span><span class="token namespace">prelude</span><span class="token namespace punctuation">.</span><span class="token plain">ZSet</span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token namespace">zio</span><span class="token namespace punctuation">.</span><span class="token namespace">prelude</span><span class="token namespace punctuation">.</span><span class="token namespace">newtypes</span><span class="token namespace punctuation">.</span><span class="token plain">Natural</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> MultiSet</span><span class="token punctuation">[</span><span class="token operator">+</span><span class="token plain">A</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token plain">A</span><span class="token punctuation">,</span><span class="token plain"> Natural</span><span class="token punctuation">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This ends up being a quite useful data type and can represent anything where the number of times an element appears matters but the order doesn&#x27;t matter, such as a shopping cart.</p><p>By using other measures of how many times an item appears we can describe other variants of sets such as <code>Int</code> for sets where items can appear a negative number of times or <code>Double</code> for sets where the number of times an item appears can be fractional.</p><p><code>ZSet</code> is focused on using the functional abstractions and new types in ZIO Prelude to describe operators on these generalizations of sets in as practical a way as possible.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="constructing-zsets">Constructing ZSets<a class="hash-link" href="#constructing-zsets" title="Direct link to heading">​</a></h2><p>The most basic way to construct a <code>ZSet</code> is from a <code>Map</code> where the keys in the map represent the elements in the <code>ZSet</code> and the values in the map represent the number of times each element appears.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> shoppingList</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;oranges&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;bananas&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// shoppingList: ZSet[String, Int] = ZSet(apples -&gt; 2, bananas -&gt; 5, oranges -&gt; 3)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can also construct a <code>ZSet</code> from existing collection types.</p><p>If we have a normal <code>Set</code> from the Scala standard library, we can convert it to a <code>ZSet</code> using the <code>fromSet</code> operator.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> set</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromSet</span><span class="token punctuation">(</span><span class="token plain">Set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// set: ZSet[Int, Boolean] = ZSet(1 -&gt; true, 2 -&gt; true, 3 -&gt; true)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we have an <code>Iterable</code> we can convert it into a <code>ZSet</code> using the <code>fromIterable</code> constructor. The measure of how many times each item appears will just be how many times it appears in the <code>Iterable</code>.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> multiSet</span><span class="token operator">:</span><span class="token plain"> MultiSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"> ZSet</span><span class="token punctuation">.</span><span class="token plain">fromIterable</span><span class="token punctuation">(</span><span class="token plain">List</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// multiSet: MultiSet[Int] = ZSet(1 -&gt; 2, 2 -&gt; 1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we can just construct an empty <code>ZSet</code> using the <code>empty</code> operator and combine <code>ZSet</code> with other <code>ZSet</code> values later.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> empty</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Nothing</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Nothing</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">empty</span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// empty: ZSet[Nothing, Nothing] = ZSet()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operators-on-zsets">Operators on ZSets<a class="hash-link" href="#operators-on-zsets" title="Direct link to heading">​</a></h2><p>As a generalization of sets, <code>ZSet</code> supports many of the same operators that exist on sets.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-membership">Set Membership<a class="hash-link" href="#set-membership" title="Direct link to heading">​</a></h3><p>We can determine how many times an element appears in the set using the <code>apply</code> operator. This requires that the measure type has an <code>Identity</code> defined for it.</p><p>If the element exists in the set the measure of how many times it appears will be returned. Otherwise the identity element will be returned.</p><p>Thus, <code>shoppingList(&quot;apples&quot;)</code> will return <code>2</code> and <code>shoppingList(&quot;eggs&quot;)</code> will return <code>0</code> while <code>set(1)</code> will return <code>true</code> and <code>set(4)</code> will return <code>false</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-union">Set Union<a class="hash-link" href="#set-union" title="Direct link to heading">​</a></h3><p>One simple way of combining sets is the union of two sets.</p><p>The union of two sets contains all elements that appear in either set. If an element appears in both sets the measure of how many times it appears in the union will be the maximum of the two measures, as determined by an <code>Ord</code> defined on the measure type.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> left</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// left: ZSet[Int, Int] = ZSet(1 -&gt; 2, 2 -&gt; 3, 3 -&gt; 4)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> right</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// right: ZSet[Int, Int] = ZSet(2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> union</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  left</span><span class="token punctuation">.</span><span class="token plain">union</span><span class="token punctuation">(</span><span class="token plain">right</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// union: ZSet[Int, Int] = ZSet(1 -&gt; 2, 2 -&gt; 3, 3 -&gt; 4, 4 -&gt; 4)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here the result will be <code>ZSet(1 -&gt; 2, 2 -&gt; 3, 3 -&gt; 4, 4 -&gt; 4)</code> because all elements in both sets will be included in the union of the two sets.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-intersection">Set Intersection<a class="hash-link" href="#set-intersection" title="Direct link to heading">​</a></h2><p>Set intersection is another basic way of combining sets.</p><p>The intersection of two sets only contains the elements that appear in both sets. If an element appears in both sets the measure of how many times it appears in the intersection will be the minimum of the two measures, as determined by an <code>Ord</code> defined on the measure type.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> left</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// left: ZSet[Int, Int] = ZSet(1 -&gt; 2, 2 -&gt; 3, 3 -&gt; 4)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> right</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// right: ZSet[Int, Int] = ZSet(2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> intersection</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  left</span><span class="token punctuation">.</span><span class="token plain">intersect</span><span class="token punctuation">(</span><span class="token plain">right</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// intersection: ZSet[Int, Int] = ZSet(2 -&gt; 2, 3 -&gt; 3)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The result will be <code>ZSet(2 -&gt; 2, 3 -&gt; 3)</code> because the only commonality of the two sets is that they contain these elements.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-difference">Set Difference<a class="hash-link" href="#set-difference" title="Direct link to heading">​</a></h2><p>We can also compute the difference of two sets.</p><p>The difference of two sets is obtained by subtracting the measure of how many times each element appears in the second set from how many times it appears in the first set. This requires an <code>Inverse</code> defined on the <code>Sum</code> of the measure type to tell us what it means to &quot;subtract&quot; for this type.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> left</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// left: ZSet[Int, Int] = ZSet(1 -&gt; 2, 2 -&gt; 3, 3 -&gt; 4)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> right</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// right: ZSet[Int, Int] = ZSet(2 -&gt; 2, 3 -&gt; 3, 4 -&gt; 4)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> diff</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  left</span><span class="token punctuation">.</span><span class="token plain">diff</span><span class="token punctuation">(</span><span class="token plain">right</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// diff: ZSet[Int, Int] = ZSet(1 -&gt; 2, 2 -&gt; 1, 3 -&gt; 1, 4 -&gt; -4)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The result will be <code>ZSet(1 -&gt; 2, 2 -&gt; 1, 3 -&gt; 1, 4 -&gt; -4)</code>.</p><p>Note that the measure of how many times <code>4</code> appears in the resulting set is negative. This is permissible because <code>Int</code> allows negative numbers.</p><p>If we didn&#x27;t want this we could define the measure type to be a type like <code>Natural</code> that did not permit negative numbers.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> left</span><span class="token operator">:</span><span class="token plain"> MultiSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromIterable</span><span class="token punctuation">(</span><span class="token plain">List</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;banana&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// left: MultiSet[String] = ZSet(banana -&gt; 1, apple -&gt; 1)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> right</span><span class="token operator">:</span><span class="token plain"> MultiSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromIterable</span><span class="token punctuation">(</span><span class="token plain">List</span><span class="token punctuation">(</span><span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;banana&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// right: MultiSet[String] = ZSet(banana -&gt; 3)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> diff</span><span class="token operator">:</span><span class="token plain"> MultiSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  left</span><span class="token punctuation">.</span><span class="token plain">diff</span><span class="token punctuation">(</span><span class="token plain">right</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// diff: MultiSet[String] = ZSet(banana -&gt; 0, apple -&gt; 1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now the measure of how many times each item appears is a natural number so &quot;banana&quot; cannot appear a negative number of times.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-combination">Set Combination<a class="hash-link" href="#set-combination" title="Direct link to heading">​</a></h2><p>Another helpful way of combining sets that makes more sense for generalized sets is the notion of &quot;adding&quot; two sets. This is less relevant for traditional sets because an element can never appear more than once in a traditional set, so &quot;adding&quot; reduces to set union.</p><p>However, for generalized sets this way of combining can be quite intuitive. For example if we think of a multiset as John&#x27;s shopping list and another multiset as Jane&#x27;s shopping list, the combination of the two includes everything on both shopping lists, with overlapping items appearing the total number of times they appear on both lists.</p><p>This requires a <code>Commutative</code> defined on the <code>Sum</code> of the measure type to tell us how to do this addition.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> janeShoppingList</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;bananas&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// janeShoppingList: ZSet[String, Int] = ZSet(apples -&gt; 4, bananas -&gt; 5)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> johnShoppingList</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain">Map</span><span class="token punctuation">(</span><span class="token string">&quot;eggs&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">12</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;bananas&quot;</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// johnShoppingList: ZSet[String, Int] = ZSet(eggs -&gt; 12, bananas -&gt; 1)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> combinedList</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  janeShoppingList</span><span class="token punctuation">.</span><span class="token plain">combine</span><span class="token punctuation">(</span><span class="token plain">johnShoppingList</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// combinedList: ZSet[String, Int] = ZSet(eggs -&gt; 12, apples -&gt; 4, bananas -&gt; 6)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The result is <code>ZSet(&quot;apples&quot; -&gt; 4, &quot;bananas&quot; -&gt; 6, &quot;eggs&quot; -&gt; 12)</code>, the combination of what each of them wants to buy.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-product">Set Product<a class="hash-link" href="#set-product" title="Direct link to heading">​</a></h2><p>We can also define the product of two sets.</p><p>This is the Cartesian product of the two sets, with each combination of elements from the two sets appearing in the product set and the measure of how many times an element appears being the product of the two measures. This requires a <code>Commutative</code> defined on the <code>Prod</code> of the measure type to tell us how to do this multiplication.</p><p>A nice example of this is modeling discrete probabilities. We can define the set of all possible outcomes of a dice roll along with their associated probabilities like this:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> die</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromMap</span><span class="token punctuation">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    Map</span><span class="token punctuation">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">6.0</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">6.0</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">6.0</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token number">4</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">6.0</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token number">5</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">6.0</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token number">6</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">6.0</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// die: ZSet[Int, Double] = ZSet(5 -&gt; 0.16666666666666666, 1 -&gt; 0.16666666666666666, 6 -&gt; 0.16666666666666666, 2 -&gt; 0.16666666666666666, 3 -&gt; 0.16666666666666666, 4 -&gt; 0.16666666666666666)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The product of this set with itself represents the set of all possible outcomes of rolling two dice.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> pair</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  die</span><span class="token punctuation">.</span><span class="token plain">zip</span><span class="token punctuation">(</span><span class="token plain">die</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// pair: ZSet[(Int, Int), Double] = ZSet((5,4) -&gt; 0.027777777777777776, (2,6) -&gt; 0.027777777777777776, (4,1) -&gt; 0.027777777777777776, (5,2) -&gt; 0.027777777777777776, (1,1) -&gt; 0.027777777777777776, (1,6) -&gt; 0.027777777777777776, (6,4) -&gt; 0.027777777777777776, (3,2) -&gt; 0.027777777777777776, (3,3) -&gt; 0.027777777777777776, (4,3) -&gt; 0.027777777777777776, (5,6) -&gt; 0.027777777777777776, (2,2) -&gt; 0.027777777777777776, (3,4) -&gt; 0.027777777777777776, (2,1) -&gt; 0.027777777777777776, (6,1) -&gt; 0.027777777777777776, (2,5) -&gt; 0.027777777777777776, (4,2) -&gt; 0.027777777777777776, (4,4) -&gt; 0.027777777777777776, (1,2) -&gt; 0.027777777777777776, (6,5) -&gt; 0.027777777777777776, (6,2) -&gt; 0.027777777777777776, (1,4) -&gt; 0.027777777777777776, (4,5) -&gt; 0.027777777777777776, (4,6) -&gt; 0.027777777777777776, (2,4) -&gt; 0.027777777777777776, (6,3) -&gt; 0.027777777777777776, (1,5) -&gt; 0.027777777777777776, (3,1) -&gt; 0.027777777777777776, (5,1) -&gt; 0.027777777777777776, (3,6) -&gt; 0.027777777777777776, (2,3) -&gt; 0.027777777777777776, (3,5) -&gt; 0.027777777777777776, (1,3) -&gt; 0.027777777777777776, (5,5) -&gt; 0.027777777777777776, (5,3) -&gt; 0.027777777777777776, (6,6) -&gt; 0.027777777777777776)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This set has thirty six elements, corresponding to each possible combination of outcomes from the two dice rolls, each with a probability of one in thirty six.</p><p>This gets more interesting if we say that matters is not the individual dice rolls but their sum.</p><p>We can express this in code with the <code>zipWith</code> operator, which allows us to combine the elements from the product of the two sets with a function. If multiple elements from the product are mapped to the same value the measures of how many times each value appears will be added, using a <code>Commutative</code> instance defined on the <code>Sum</code> of the measure type.</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> sum</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  die</span><span class="token punctuation">.</span><span class="token plain">zipWith</span><span class="token punctuation">(</span><span class="token plain">die</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token plain">_ </span><span class="token operator">+</span><span class="token plain"> _</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// sum: ZSet[Int, Double] = ZSet(5 -&gt; 0.1111111111111111, 10 -&gt; 0.08333333333333333, 6 -&gt; 0.1388888888888889, 9 -&gt; 0.1111111111111111, 2 -&gt; 0.027777777777777776, 12 -&gt; 0.027777777777777776, 7 -&gt; 0.16666666666666669, 3 -&gt; 0.05555555555555555, 11 -&gt; 0.05555555555555555, 8 -&gt; 0.1388888888888889, 4 -&gt; 0.08333333333333333)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting set has eleven elements, corresponding to the possible sums from two dice rolls of two to twelve. The measure for each value corresponds to the probability of that sum being rolled.</p><p>So for example the probability of seven is about 16.7% whereas the probability of rolling two or twelve is only about 2.8%.</p><p>We can take this even further using the <code>flatMap</code> operator.</p><p>The <code>zipWith</code> operator lets us combine two sets when the sets are independent of each other. With the <code>flatMap</code> operator we can create a new set based on each element of the first set and then &quot;flatten&quot; the resulting set down.</p><p>We could rewrite the example above using <code>flatMap</code> and a for comprehension like this:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> sum</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    a </span><span class="token keyword">&lt;-</span><span class="token plain"> die</span><br></span><span class="token-line"><span class="token plain">    b </span><span class="token keyword">&lt;-</span><span class="token plain"> die</span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">yield</span><span class="token plain"> a </span><span class="token operator">+</span><span class="token plain"> b</span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// sum: ZSet[Int, Double] = ZSet(5 -&gt; 0.1111111111111111, 10 -&gt; 0.08333333333333333, 6 -&gt; 0.1388888888888889, 9 -&gt; 0.1111111111111111, 2 -&gt; 0.027777777777777776, 12 -&gt; 0.027777777777777776, 7 -&gt; 0.16666666666666669, 3 -&gt; 0.05555555555555555, 11 -&gt; 0.05555555555555555, 8 -&gt; 0.1388888888888889, 4 -&gt; 0.08333333333333333)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This allows us to express conditional logic, such as the probability distribution of outcomes for a subsequent event depending on the outcome of a previous event.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transforming-elements">Transforming Elements<a class="hash-link" href="#transforming-elements" title="Direct link to heading">​</a></h2><p>We can transform set elements using the <code>map</code> operator.</p><p>For example, we could add one to each value in a set like this:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> setPlusOne</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  set</span><span class="token punctuation">.</span><span class="token plain">map</span><span class="token punctuation">(</span><span class="token plain">_ </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// setPlusOne: ZSet[Int, Boolean] = ZSet(2 -&gt; true, 3 -&gt; true, 4 -&gt; true)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This requires a <code>Commutative</code> instance defined for the <code>Sum</code> of the measure type so that we can combine the measures if we map two elements to the same value.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transforming-measures">Transforming Measures<a class="hash-link" href="#transforming-measures" title="Direct link to heading">​</a></h2><p>We can also transform the measure we use to represent how many times an item appears using the <code>transform</code> operator. For example, perhaps we have constructed a set where the measure is an <code>Int</code> but we would like to transform it to a <code>Double</code> so we can compose it with other <code>ZSet</code> values with <code>Double</code> as the measure type.</p><p>We can do that with <code>transform</code> like this:</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">def</span><span class="token plain"> constant</span><span class="token punctuation">(</span><span class="token plain">n</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token plain"> ZSet</span><span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">(</span><span class="token plain">n</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token plain">transform</span><span class="token punctuation">(</span><span class="token plain">_</span><span class="token punctuation">.</span><span class="token plain">toDouble</span><span class="token punctuation">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extracting-zset-values">Extracting ZSet Values<a class="hash-link" href="#extracting-zset-values" title="Direct link to heading">​</a></h2><p>If the number of times a value appears in the set is a natural number then we can use normal collection operators to fold over its values, treating it much like a normal set</p><div class="language-scala codeBlockContainer_Ckt0 theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line"><span class="token keyword">val</span><span class="token plain"> fruits</span><span class="token operator">:</span><span class="token plain"> MultiSet</span><span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  ZSet</span><span class="token punctuation">.</span><span class="token plain">fromIterable</span><span class="token punctuation">(</span><span class="token plain">List</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// fruits: MultiSet[String] = ZSet(banana -&gt; 1, orange -&gt; 2, apple -&gt; 2)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword">val</span><span class="token plain"> fruitCount</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin">Int</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  fruits</span><span class="token punctuation">.</span><span class="token plain">foldLeft</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token plain">n</span><span class="token punctuation">,</span><span class="token plain"> _</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">=&gt;</span><span class="token plain"> n </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token comment">// fruitCount: Int = 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will return <code>5</code> because there are five elements in the set we are folding over.</p><p>We can convert a <code>ZSet</code> back to a <code>Map</code> from elements to a measure of how many times they appear using the <code>toMap</code> operator.</p><p>We can also always convert a <code>ZSet</code> back to a <code>Set</code> using the <code>toSet</code> operator. Any elements in the <code>ZSet</code> with a measure equal to zero based on an <code>Identity</code> defined on the <code>Sum</code> of the measure type will be discarded from the resulting set.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/zio-prelude/functionaldatatypes/validation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Validation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zio-prelude/functionaldatatypes/zvalidation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ZValidation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#constructing-zsets" class="table-of-contents__link toc-highlight">Constructing ZSets</a></li><li><a href="#operators-on-zsets" class="table-of-contents__link toc-highlight">Operators on ZSets</a><ul><li><a href="#set-membership" class="table-of-contents__link toc-highlight">Set Membership</a></li><li><a href="#set-union" class="table-of-contents__link toc-highlight">Set Union</a></li></ul></li><li><a href="#set-intersection" class="table-of-contents__link toc-highlight">Set Intersection</a></li><li><a href="#set-difference" class="table-of-contents__link toc-highlight">Set Difference</a></li><li><a href="#set-combination" class="table-of-contents__link toc-highlight">Set Combination</a></li><li><a href="#set-product" class="table-of-contents__link toc-highlight">Set Product</a></li><li><a href="#transforming-elements" class="table-of-contents__link toc-highlight">Transforming Elements</a></li><li><a href="#transforming-measures" class="table-of-contents__link toc-highlight">Transforming Measures</a></li><li><a href="#extracting-zset-values" class="table-of-contents__link toc-highlight">Extracting ZSet Values</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <img src="/img/navbar_brand.png" alt="zio">
            </li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items clean-list"><li class="footer__item">
              <a href="https://github.com/zio/zio">
                <img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github">
              </a>
            </li></ul></div><div class="col footer__col"><div class="footer__title">Chat with us on Discord</div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://discord.gg/2ccFBr4">
                  <img src="https://img.shields.io/discord/629491597070827530?logo=discord&style=social" alt="discord">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Follow us on Twitter</div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://twitter.com/zioscala">
                  <img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&style=social" alt="twitter">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Additional resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://javadoc.io/doc/dev.zio/zio_2.12/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Scaladoc of ZIO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 ZIO Maintainers - Built with <a href="https://v2.docusaurus.io/">Docusaurus v2</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.bc56e133.js"></script>
<script src="/assets/js/main.45687b07.js"></script>
</body>
</html>