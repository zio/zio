<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Introduction · ZIO</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## ZIO Environment"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Introduction · ZIO"/><meta property="og:type" content="website"/><meta property="og:url" content="https://zio.dev/"/><meta property="og:description" content="## ZIO Environment"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"cornerOffset":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/navbar_brand.png" alt="ZIO"/><h2 class="headerTitleWithLogo">ZIO</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview/overview_index" target="_self">Overview</a></li><li class="siteNavGroupActive"><a href="/docs/datatypes/" target="_self">Data Types</a></li><li class=""><a href="/docs/services/" target="_self">Services</a></li><li class=""><a href="/docs/usecases/usecases_index" target="_self">Use Cases</a></li><li class=""><a href="/docs/howto/" target="_self">How to</a></li><li class=""><a href="/docs/resources/" target="_self">Resources</a></li><li class=""><a href="/docs/about/about_index" target="_self">About</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Contextual Types</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Core Data Types<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/">Summary</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/zio">ZIO</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/uio">UIO</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/urio">URIO</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/task">Task</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/rio">RIO</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/io">IO</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/exit">Exit</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/cause">Cause</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/core/runtime">Runtime</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Contextual Types<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/datatypes/contextual/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/has">Has</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/zlayer">ZLayer</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/rlayer">RLayer</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/ulayer">ULayer</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/layer">Layer</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/urlayer">URLayer</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/contextual/tasklayer">TaskLayer</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Fiber Primitives<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/fiber/">Summary</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/fiber/fiber">Fiber</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/fiber/fiberref">FiberRef</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/fiber/fiberid">Fiber.Id</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/fiber/fiberstatus">Fiber.Status</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concurrency Primitives<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/zref">ZRef</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/ref">Ref</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/zrefm">ZRefM</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/refm">RefM</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/promise">Promise</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/queue">Queue</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/hub">Hub</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/concurrency/semaphore">Semaphore</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">STM<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/stm">STM</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tarray">TArray</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tset">TSet</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tmap">TMap</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tref">TRef</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tpriorityqueue">TPriorityQueue</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tpromise">TPromise</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tqueue">TQueue</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/treentrantlock">TReentrantLock</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stm/tsemaphore">TSemaphore</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Resource Safety<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/zmanaged">ZManaged</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/managed">Managed</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/task-managed">TaskManaged</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/rmanaged">RManaged</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/umanaged">UManaged</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/resource/urmanaged">URManaged</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Streaming<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/stream/">Summary</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stream/stream">Stream</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stream/sink">Sink</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/stream/subscription-ref">SubscriptionRef</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Miscellaneous<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/datatypes/misc/">Summary</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/misc/chunk">Chunk</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/misc/schedule">Schedule</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes/misc/supervisor">Supervisor</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/zio/zio/edit/master/docs/datatypes/contextual/index.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Introduction</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="zio-environment"></a><a href="#zio-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Environment</h2>
<p>The <code>ZIO[-R, +E, +A]</code> data type describes an effect that requires an input type of <code>R</code>, as an environment, may fail with an error of type <code>E</code> or succeed and produces a value of type <code>A</code>.</p>
<p>The input type is also known as <em>environment type</em>. This type-parameter indicates that to run an effect we need one or some services as an environment of that effect. In other word, <code>R</code> represents the <em>requirement</em> for the effect to run, meaning we need to fulfill the requirement in order to make the effect <em>runnable</em>.</p>
<p><code>R</code> represents dependencies; whatever services, config, or wiring a part of a ZIO program depends upon to work. We will explore what we can do with <code>R</code>, as it plays a crucial role in <code>ZIO</code>.</p>
<p>For example, when we have <code>ZIO[Console, Nothing, Unit]</code>, this shows that to run this effect we need to provide an implementation of the <code>Console</code> service:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> effect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = putStrLn(<span class="hljs-string">"Hello, World!"</span>).orDie
</code></pre>
<p>So finally when we provide a live version of <code>Console</code> service to our <code>effect</code>, it will be converted to an effect that doesn't require any environmental service:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> mainApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = effect.provideLayer(<span class="hljs-type">Console</span>.live)
</code></pre>
<p>Finally, to run our application we can put our <code>mainApp</code> inside the <code>run</code> method:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">ZEnv</span>, <span class="hljs-type">ZIO</span>}
<span class="hljs-keyword">import</span> zio.console._

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MainApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> effect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = putStrLn(<span class="hljs-string">"Hello, World!"</span>).orDie
  <span class="hljs-keyword">val</span> mainApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = effect.provideLayer(<span class="hljs-type">Console</span>.live)

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">ZIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">ExitCode</span>] = 
    mainApp.exitCode
}
</code></pre>
<p>Sometimes an effect needs more than one environmental service, it doesn't matter, in these cases, we compose all dependencies by <code>++</code> operator:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.random._

<span class="hljs-keyword">val</span> effect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Random</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-keyword">for</span> {
  r &lt;- nextInt
  _ &lt;- putStrLn(<span class="hljs-string">s"random number: <span class="hljs-subst">$r</span>"</span>).orDie
} <span class="hljs-keyword">yield</span> ()

<span class="hljs-keyword">val</span> mainApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = effect.provideLayer(<span class="hljs-type">Console</span>.live ++ <span class="hljs-type">Random</span>.live)
</code></pre>
<p>We don't need to provide live layers for built-in services (don't worry, we will discuss layers later in this page). ZIO has a <code>ZEnv</code> type alias for the composition of all ZIO built-in services (Clock, Console, System, Random, and Blocking). So we can run the above <code>effect</code> as follows:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.random._
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">ZEnv</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MainApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> effect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Random</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-keyword">for</span> {
    r &lt;- nextInt
    _ &lt;- putStrLn(<span class="hljs-string">s"random number: <span class="hljs-subst">$r</span>"</span>).orDie
  } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">ZIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">ExitCode</span>] =
    effect.exitCode
}
</code></pre>
<p>ZIO environment facility enables us to:</p>
<ol>
<li><p><strong>Code to Interface</strong> — like object-oriented paradigm, in ZIO we encouraged to code to interfaces and defer the implementation. It is the best practice, but ZIO does not enforce us to do that.</p></li>
<li><p><strong>Write a Testable Code</strong> — By coding to an interface, whenever we want to test our effects, we can easily mock any external services, by providing a <em>test</em> version of those instead of the <code>live</code> version.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="contextual-data-types"></a><a href="#contextual-data-types" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contextual Data Types</h2>
<p>Defining service in ZIO is not very different from object-oriented style, it has the same principle; coding to an interface, not an implementation. But the way ZIO encourages us to implement this principle by using <em>Module Pattern</em> which doesn't very differ from the object-oriented style.</p>
<p>ZIO have two data type that plays a key role in writing ZIO services using <em>Module Pattern</em>:</p>
<ol>
<li>Has</li>
<li>ZLayer</li>
</ol>
<p>So, before diving into the <em>Module Patter</em>, We need to learn more about ZIO Contextual Data Types. Let's review each of them:</p>
<h3><a class="anchor" aria-hidden="true" id="has"></a><a href="#has" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Has</h3>
<p><code>Has[A]</code> represents a dependency on a service of type <code>A</code>, e.g. Has[Logging]. Some components in an application might depend upon more than one service.</p>
<p>ZIO wrap services with <code>Has</code> data type to:</p>
<ol>
<li><p><strong>Wire/bind</strong> services into their implementations. This data type has an internal map to maintain this binding.</p></li>
<li><p><strong>Combine</strong> multiple services together. Two or more <code>Has[_]</code> elements can be combined <em>horizontally</em> using their <code>++</code> operator.</p></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="zlayer"></a><a href="#zlayer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZLayer</h3>
<p><code>ZLayer[-RIn, +E, +ROut]</code> is a recipe to build an environment of type <code>ROut</code>, starting from a value <code>RIn</code>, and possibly producing an error <code>E</code> during creation.</p>
<p>We can compose <code>layerA</code> and <code>layerB</code> <em>horizontally</em> to build a layer that has the requirements of both layers, to provide the capabilities of both layers, through <code>layerA ++ layerB</code></p>
<p>We can also compose layers <em>vertically</em>, meaning the output of one layer is used as input for the subsequent layer to build the next layer, resulting in one layer with the requirement of the first, and the output of the second layer: <code>layerA &gt;&gt;&gt; layerB</code>. When doing this, the first layer must output all the services required by the second layer, but we can defer creating some of these services and require them as part of the input of the final layer using <code>ZLayer.identity</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="defining-services-in-oop"></a><a href="#defining-services-in-oop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining Services in OOP</h2>
<p>Before diving into writing services in ZIO style, let's review how we define them in object-oriented fashion:</p>
<ol>
<li><strong>Service Definition</strong> — In object-oriented programming, we define services with traits. A service is a bundle of related functionality which are defined in a trait:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">FooService</span> </span>{

}
</code></pre>
<ol start="2">
<li><strong>Service Implementation</strong> — We implement these services by using classes:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FooService</span> </span>{
    
}
</code></pre>
<ol start="3">
<li><strong>Defining Dependencies</strong> — If the creation of a service depends on other services, we can define these dependencies by using constructors:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ServiceA</span> </span>{

}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ServiceB</span> </span>{

}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooServiceImpl</span>(<span class="hljs-params">a: <span class="hljs-type">ServiceA</span>, b: <span class="hljs-type">ServiceB</span></span>) </span>{

}
</code></pre>
<p>In object-oriented programming, the best practice is to <em>program to an interface, not an implementation</em>. So in the previous example, <code>ServiceA</code> and <code>ServiceB</code> are interfaces, not concrete classes.</p>
<ol start="4">
<li><strong>Injecting Dependencies</strong> — Now, the client of <code>FooServiceImpl</code> service can provide its own implementation of <code>ServiceA</code> and <code>ServiceB</code>, and inject them to the <code>FooServiceImpl</code> constructor:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServiceAImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ServiceA</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServiceBImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ServiceB</span></span>
<span class="hljs-keyword">val</span> fooService = <span class="hljs-keyword">new</span> <span class="hljs-type">FooServiceImpl</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">ServiceAImpl</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">ServiceBImpl</span>)
</code></pre>
<p>Sometimes, as the number of dependent services grows and the dependency graph of our application becomes complicated, we need an automatic way of wiring and providing dependencies into the services of our application. In these situations, we might use a dependency injection framework to do all its magic machinery for us.</p>
<h2><a class="anchor" aria-hidden="true" id="defining-services-in-zio"></a><a href="#defining-services-in-zio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining Services in ZIO</h2>
<p>A service is a group of functions that deals with only one concern. Keeping the scope of each service limited to a single responsibility improves our ability to understand code, in that we need to focus only on one topic at a time without juggling too many concepts together in our head.</p>
<p><code>ZIO</code> itself provides the basic capabilities through modules, e.g. see how <code>ZEnv</code> is defined.</p>
<p>In the functional Scala as well as in object-oriented programming the best practice is to <em>Program to an Interface, Not an Implementation</em>. This is the most important design principle in software development and helps us to write maintainable code by:</p>
<ul>
<li><p>Allowing the client to hold an interface as a contract and don't worry about the implementation. The interface signature determines all operations that should be done.</p></li>
<li><p>Enabling a developer to write more testable programs. When we write a test for our business logic we don't have to run and interact with real services like databases which makes our test run very slow. If our code is correct our test code should always pass, there should be no hidden variables or depend on outside sources. We can't know that the database is always running correctly. We don't want to fail our tests because of the failure of external service.</p></li>
<li><p>Providing the ability to write more modular applications. So we can plug in different implementations for different purposes without a major modification.</p></li>
</ul>
<p>It is not mandatory but ZIO encourages us to follow this principle by bundling related functionality as an interface by using <em>Module Pattern</em>.</p>
<p>The core idea is that a layer depends upon the interfaces exposed by the layers immediately below itself, but is completely unaware of its dependencies' internal implementations.</p>
<p>In object-oriented programming:</p>
<ul>
<li><strong>Service Definition</strong> is done by using <em>interfaces</em> (Scala trait or Java Interface).</li>
<li><strong>Service Implementation</strong> is done by implementing interfaces using <em>classes</em> or creating <em>new object</em> of the interface.</li>
<li><strong>Defining Dependencies</strong> is done by using <em>constructors</em>. They allow us to build classes, give their dependencies. This is called constructor-based dependency injection.</li>
</ul>
<p>We have a similar analogy in Module Pattern, except instead of using <em>constructors</em> we use <strong><code>ZLayer</code></strong> to define dependencies. So in ZIO fashion, we can think of <code>ZLayer</code> as a service constructor.</p>
<p>ZIO has two patterns to write services. The first version of <em>Module Pattern</em> has some boilerplate, but the second version is very concise and straightforward. ZIO doesn't mandate any of them, you can use whichever you like.</p>
<h3><a class="anchor" aria-hidden="true" id="module-pattern-10"></a><a href="#module-pattern-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Module Pattern 1.0</h3>
<p>Let's start learning this pattern by writing a <code>Logging</code> service:</p>
<ol>
<li><p><strong>Bundling</strong> — Define an object that gives the name to the module, this can be (not necessarily) a package object. We create a <code>logging</code> object, all the definitions and implementations will be included in this object.</p></li>
<li><p><strong>Wrapping Service Type Definition with <code>Has[_]</code> Data Type</strong> — At the first step, we create a package object of <code>logging</code>, and inside that we define the <code>Logging</code> module as a type alias for <code>Has[Logging.Service]</code>.</p></li>
<li><p><strong>Service Definition</strong> — Then we create the <code>Logging</code> companion object. Inside the companion object, we define the service definition with a trait named <code>Service</code>. Traits are how we define services. A service could be all the stuff that is related to one concept with singular responsibility.</p></li>
<li><p><strong>Service Implementation</strong> — After that, we implement our service by creating a new Service and then lifting that entire implementation into the <code>ZLayer</code> data type by using the <code>ZIO.succeed</code> constructor.</p></li>
<li><p><strong>Defining Dependencies</strong> — If our service has a dependency on other services, we should use constructors like <code>ZLayer.fromService</code> and <code>ZLayer.fromServices</code>.</p></li>
<li><p><strong>Accessor Methods</strong> — Finally, to create the API more ergonomic, it's better to write accessor methods for all of our service methods.</p></li>
</ol>
<p>Accessor methods allow us to utilize all the features inside the service through the ZIO Environment. That means, if we call <code>log</code>, we don't need to pull out the <code>log</code> function from the ZIO Environment. The <code>accessM</code> method helps us to access the environment of effect and reduce the redundant operation, every time.</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">logging</span> </span>{
  <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">Logging</span> </span>= <span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>.<span class="hljs-type">Service</span>]

  <span class="hljs-comment">// Companion object exists to hold service definition and also the live implementation.</span>
  <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Logging</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Service</span> </span>{
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]
    }

    <span class="hljs-keyword">val</span> live: <span class="hljs-type">ULayer</span>[<span class="hljs-type">Logging</span>] = <span class="hljs-type">ZLayer</span>.succeed {
      <span class="hljs-keyword">new</span> <span class="hljs-type">Service</span> {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] =
          <span class="hljs-type">ZIO</span>.effectTotal(println(line))
      }
    }
  }

  <span class="hljs-comment">// Accessor Methods</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: =&gt; <span class="hljs-type">String</span>): <span class="hljs-type">URIO</span>[<span class="hljs-type">Logging</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-type">ZIO</span>.accessM(_.get.log(line))
}
</code></pre>
<p>We might need <code>Console</code> and <code>Clock</code> services to implement the <code>Logging</code> service. In this case, we use <code>ZLayer.fromServices</code> constructor:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">logging</span> </span>{
  <span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">Logging</span> </span>= <span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>.<span class="hljs-type">Service</span>]

  <span class="hljs-comment">// Companion object exists to hold service definition and also the live implementation.</span>
  <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Logging</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Service</span> </span>{
      <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]
    }

    <span class="hljs-keyword">val</span> live: <span class="hljs-type">URLayer</span>[<span class="hljs-type">Clock</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span>, <span class="hljs-type">Logging</span>] =
      <span class="hljs-type">ZLayer</span>.fromServices[<span class="hljs-type">Clock</span>.<span class="hljs-type">Service</span>, <span class="hljs-type">Console</span>.<span class="hljs-type">Service</span>, <span class="hljs-type">Logging</span>.<span class="hljs-type">Service</span>] {
        (clock: <span class="hljs-type">Clock</span>.<span class="hljs-type">Service</span>, console: <span class="hljs-type">Console</span>.<span class="hljs-type">Service</span>) =&gt;
          <span class="hljs-keyword">new</span> <span class="hljs-type">Service</span> {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] =
              <span class="hljs-keyword">for</span> {
                current &lt;- clock.currentDateTime.orDie
                _ &lt;- console.putStrLn(current.toString + <span class="hljs-string">"--"</span> + line).orDie
              } <span class="hljs-keyword">yield</span> ()
          }
      }
  }

  <span class="hljs-comment">// Accessor Methods</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: =&gt; <span class="hljs-type">String</span>): <span class="hljs-type">URIO</span>[<span class="hljs-type">Logging</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-type">ZIO</span>.accessM(_.get.log(line))
}
</code></pre>
<p>This is how ZIO services are created. Let's use the <code>Logging</code> service in our application:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">LoggingExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">import</span> zio.<span class="hljs-type">RIO</span>
  <span class="hljs-keyword">import</span> logging._
 
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> app: <span class="hljs-type">RIO</span>[<span class="hljs-type">Logging</span>, <span class="hljs-type">Unit</span>] = log(<span class="hljs-string">"Hello, World!"</span>) 

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]) = 
    app.provideLayer(<span class="hljs-type">Logging</span>.live).exitCode
}
</code></pre>
<p>During writing an application we don't care which implementation version of the <code>Logging</code> service will be injected into our <code>app</code>, later at the end of the day, it will be provided by methods like <code>provideLayer</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="module-pattern-20"></a><a href="#module-pattern-20" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Module Pattern 2.0</h3>
<p>Writing services with <em>Module Pattern 2.0</em> is much easier than the previous one. It removes some level of indirection from the previous version, and much more similar to the object-oriented approach in writing services.</p>
<p><em>Module Pattern 2.0</em> has more similarity with object-oriented way of defining services. We use classes to implement services, and we use constructors to define service dependencies; At the end of the day, we lift class constructor into the <code>ZLayer</code>.</p>
<ol>
<li><strong>Service Definition</strong> — Defining service in this version has changed slightly compared to the previous version. We would take the service definition and pull it out into the top-level:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]
}
</code></pre>
<ol start="2">
<li><strong>Service Implementation</strong> — It is the same as what we did in object-oriented fashion. We implement the service with Scala class. By convention, we name the live version of its implementation as <code>LoggingLive</code>:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoggingLive</span>(<span class="hljs-params"></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] = 
    <span class="hljs-type">ZIO</span>.effectTotal(print(line))
}
</code></pre>
<ol start="3">
<li><strong>Define Service Dependencies</strong> — We might need <code>Console</code> and <code>Clock</code> services to implement the <code>Logging</code> service. In this case, we put its dependencies into its constructor. All the dependencies are just interfaces, not implementation. Just like what we did in object-oriented style:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.console.<span class="hljs-type">Console</span>
<span class="hljs-keyword">import</span> zio.clock.<span class="hljs-type">Clock</span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoggingLive</span>(<span class="hljs-params">console: <span class="hljs-type">Console</span>.<span class="hljs-type">Service</span>, clock: <span class="hljs-type">Clock</span>.<span class="hljs-type">Service</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] = 
    <span class="hljs-keyword">for</span> {
      current &lt;- clock.currentDateTime.orDie
      _       &lt;- console.putStrLn(current.toString + <span class="hljs-string">"--"</span> + line).orDie
    } <span class="hljs-keyword">yield</span> ()
}
</code></pre>
<ol start="4">
<li><strong>Defining ZLayer</strong> — Now, we create a companion object for <code>LoggingLive</code> data type and lift the service implementation into the <code>ZLayer</code>:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">LoggingLive</span> </span>{
  <span class="hljs-keyword">val</span> layer: <span class="hljs-type">URLayer</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">Console</span>.<span class="hljs-type">Service</span>] <span class="hljs-keyword">with</span> <span class="hljs-type">Has</span>[<span class="hljs-type">Clock</span>.<span class="hljs-type">Service</span>], <span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>]] =
    (<span class="hljs-type">LoggingLive</span>(_, _)).toLayer
}
</code></pre>
<ol start="5">
<li><strong>Accessor Methods</strong> — Finally, to create the API more ergonomic, it's better to write accessor methods for all of our service methods. Just like what we did in Module Pattern 1.0, but with a slight change, in this case, instead of using <code>ZIO.accessM</code> we use <code>ZIO.serviceWith</code> method to define accessors inside the service companion object:</li>
</ol>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">URIO</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>], <span class="hljs-type">Unit</span>] = <span class="hljs-type">ZIO</span>.serviceWith[<span class="hljs-type">Logging</span>](_.log(line))
}
</code></pre>
<p>That's it! Very simple! ZIO encourages us to follow some of the best practices in object-oriented programming. So it doesn't require us to throw away all our object-oriented knowledge.</p>
<blockquote>
<p><strong>Note:</strong></p>
<p>In <em>Module Pattern 2.0</em> we don't use type aliases for Has wrappers, like <code>type Logging = Has[Logging.Service]</code>. So unlike the previous pattern, we encourage using explicitly the <code>Has</code> wrappers whenever we want to specify the dependency on a service.</p>
<p>So instead of writing <code>ZLayer[Console with Clock, Nothing, Logging]</code>, we write <code>ZLayer[Has[Logging] with Has[Clock], Nothing, Has[Logging]]</code>.</p>
</blockquote>
<p>Finally, we provide required layers to our <code>app</code> effect:</p>
<pre><code class="hljs css language-scala"> <span class="hljs-keyword">import</span> zio._
 <span class="hljs-keyword">val</span> app = <span class="hljs-type">Logging</span>.log(<span class="hljs-string">"Application Started"</span>)

 zio.<span class="hljs-type">Runtime</span>.<span class="hljs-keyword">default</span>.unsafeRun(
   app.provideLayer(<span class="hljs-type">LoggingLive</span>.layer)
 )
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="dependency-injection-in-zio"></a><a href="#dependency-injection-in-zio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependency Injection in ZIO</h2>
<p>ZLayers combined with the ZIO environment, allow us to use ZIO for dependency injection. There are two parts for dependency injection:</p>
<ol>
<li><strong>Building Dependency Graph</strong></li>
<li><strong>Dependency Propagation</strong></li>
</ol>
<p>ZIO has a full solution to the dependency injection problem. It solves the first problem by using compositional properties of <code>ZLayer</code>, and solves the second by using ZIO Environment facilities like <code>ZIO#provide</code>.</p>
<p>The way ZIO manages dependencies between application components gives us extreme power in terms of compositionality and offering the capability to easily change different implementations. This is particularly useful during <em>testing</em> and <em>mocking</em>.</p>
<p>By using ZLayer and ZIO Environment we can solve the propagation and wire-up problems in dependency injection. But it doesn't necessary to use it, we can still use things like <a href="https://github.com/google/guice">Guice</a> with ZIO, or we might like to use <a href="https://izumi.7mind.io/distage/index.html">izumi distage</a> solution for dependency injection.</p>
<h3><a class="anchor" aria-hidden="true" id="building-dependency-graph"></a><a href="#building-dependency-graph" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building Dependency Graph</h3>
<p>Assume we have several services with their dependencies, and we need a way to compose and wiring up these dependencies and create the dependency graph of our application. <code>ZLayer</code> is a ZIO solution for this problem, it allows us to build up the whole application dependency graph by composing layers horizontally and vertically. More information about how to compose layers is on the <a href="/docs/datatypes/contextual/zlayer">ZLayer</a> page.</p>
<h3><a class="anchor" aria-hidden="true" id="dependency-propagation"></a><a href="#dependency-propagation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependency Propagation</h3>
<p>When we write an application, our application has a lot of dependencies. We need a way to provide implementations and feeding and propagating all dependencies throughout the whole application. We can solve the propagation problem by using <em>ZIO environment</em>.</p>
<p>During the development of an application, we don't care about implementations. Incrementally, when we use various effects with different requirements on their environment, all part of our application composed together, and at the end of the day we have a ZIO effect which requires some services as an environment. Before running this effect by <code>unsafeRun</code> we should provide an implementation of these services into the ZIO Environment of that effect.</p>
<p>ZIO has some facilities for doing this. <code>ZIO#provide</code> is the core function that allows us to <em>feed</em> an <code>R</code> to an effect that requires an <code>R</code>.</p>
<p>Notice that the act of <code>provide</code>ing an effect with its environment, eliminates the environment dependency in the resulting effect type, represented by type <code>Any</code> of the resulting environment.</p>
<h4><a class="anchor" aria-hidden="true" id="using-provide-method"></a><a href="#using-provide-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using <code>provide</code> Method</h4>
<p>The <code>ZIO#provide</code> takes an <code>R</code> environment and provides it to the <code>ZIO</code> effect which eliminates its dependency on <code>R</code>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ZIO</span>[-<span class="hljs-type">R</span>, +<span class="hljs-type">E</span>, +<span class="hljs-type">A</span>] </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">provide</span></span>(r: <span class="hljs-type">R</span>)(<span class="hljs-keyword">implicit</span> ev: <span class="hljs-type">NeedsEnv</span>[<span class="hljs-type">R</span>]): <span class="hljs-type">IO</span>[<span class="hljs-type">E</span>, <span class="hljs-type">A</span>]
}
</code></pre>
<p>This is similar to dependency injection, and the <code>provide</code> function can be thought of as <code>inject</code>.</p>
<p>Assume we have the following services:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(str: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]
}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>) = <span class="hljs-type">ZIO</span>.serviceWith[<span class="hljs-type">Logging</span>](_.log(line))
}
</code></pre>
<p>Let's write a simple program using <code>Logging</code> service:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> app: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>], <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-type">Logging</span>.log(<span class="hljs-string">"Application Started!"</span>)
</code></pre>
<p>We can <code>provide</code> implementation of <code>Logging</code> service into the <code>app</code> effect:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> loggingImpl = <span class="hljs-type">Has</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">Logging</span> {
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] =
    <span class="hljs-type">UIO</span>.effectTotal(println(line))
})

<span class="hljs-keyword">val</span> effect = app.provide(loggingImpl)
</code></pre>
<p>Most of the time, we don't use <code>Has</code> directly to implement our services, instead; we use <code>ZLayer</code> to construct the dependency graph of our application, then we use methods like <code>ZIO#provideLayer</code> to propagate dependencies into the environment of our ZIO effect.</p>
<h4><a class="anchor" aria-hidden="true" id="using-providelayer-method"></a><a href="#using-providelayer-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using <code>provideLayer</code> Method</h4>
<p>Unlike the <code>ZIO#provide</code> which takes and an <code>R</code>, the <code>ZIO#provideLayer</code> takes a <code>ZLayer</code> to the ZIO effect and translates it to another level.</p>
<p>Assume we have written this piece of program that requires Clock and Console services:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.clock._
<span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.random._

<span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Random</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-keyword">for</span> {
  random  &lt;- nextInt 
  _       &lt;- putStrLn(<span class="hljs-string">s"A random number: <span class="hljs-subst">${random.toString}</span>"</span>).orDie
  current &lt;- currentDateTime.orDie
  _       &lt;- putStrLn(<span class="hljs-string">s"Current Data Time: <span class="hljs-subst">${current.toString}</span>"</span>).orDie
} <span class="hljs-keyword">yield</span> ()
</code></pre>
<p>We can compose the live implementation of <code>Random</code>, <code>Console</code> and <code>Clock</code> services horizontally and then provide them to the <code>myApp</code> effect by using <code>ZIO#provideLayer</code> method:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> mainEffect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = 
  myApp.provideLayer(<span class="hljs-type">Random</span>.live ++ <span class="hljs-type">Console</span>.live ++ <span class="hljs-type">Clock</span>.live)
</code></pre>
<p>As we see, the type of our effect converted from <code>ZIO[Random with Console with Clock, Nothing, Unit]</code> which requires two services to <code>ZIO[Any, Nothing, Unit]</code> effect which doesn't require any services.</p>
<h4><a class="anchor" aria-hidden="true" id="using-providesomelayer-method"></a><a href="#using-providesomelayer-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using <code>provideSomeLayer</code> Method</h4>
<p>Sometimes we have written a program, and we don't want to provide all its requirements. In these cases, we can use <code>ZIO#provideSomeLayer</code> to partially apply some layers to the <code>ZIO</code> effect.</p>
<p>In the previous example, if we just want to provide the <code>Console</code>, we should use <code>ZIO#provideSomeLayer</code>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> mainEffect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Random</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = 
  myApp.provideSomeLayer[<span class="hljs-type">Random</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span>](<span class="hljs-type">Console</span>.live)
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<p>When using <code>ZIO#provideSomeLayer[R0 &lt;: Has[_]]</code>, we should provide the remaining type as <code>R0</code> type parameter. This workaround helps the compiler to infer the proper types.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="using-providecustomlayer-method"></a><a href="#using-providecustomlayer-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using <code>provideCustomLayer</code> Method</h4>
<p><code>ZEnv</code> is a convenient type alias that provides several built-in ZIO layers that are useful in most applications.</p>
<p>Sometimes we have written a program that contains ZIO built-in services and some other services that are not part of <code>ZEnv</code>.</p>
<p>As <code>ZEnv</code> provides us the implementation of built-in services, we just need to provide layers for those services that are not part of the <code>ZEnv</code>.</p>
<p><code>ZIO#provideCustomLayer</code> helps us to do so and returns an effect that only depends on <code>ZEnv</code>.</p>
<p>Let's write an effect that has some built-in services and also has a <code>Logging</code> service:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(str: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>]
}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Logging</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>) = <span class="hljs-type">ZIO</span>.serviceWith[<span class="hljs-type">Logging</span>](_.log(line))
}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">LoggingLive</span> </span>{
  <span class="hljs-keyword">val</span> layer: <span class="hljs-type">ULayer</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>]] = <span class="hljs-type">ZLayer</span>.succeed {
    <span class="hljs-keyword">new</span> <span class="hljs-type">Logging</span> {
      <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(str: <span class="hljs-type">String</span>): <span class="hljs-type">UIO</span>[<span class="hljs-type">Unit</span>] = ???
    }
  }
}

<span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">Logging</span>] <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-keyword">for</span> {
  _       &lt;- <span class="hljs-type">Logging</span>.log(<span class="hljs-string">"Application Started!"</span>)
  current &lt;- currentDateTime.orDie
  _       &lt;- putStrLn(<span class="hljs-string">s"Current Data Time: <span class="hljs-subst">${current.toString}</span>"</span>).orDie
} <span class="hljs-keyword">yield</span> ()
</code></pre>
<p>This program uses two ZIO built-in services, <code>Console</code> and <code>Clock</code>. We don't need to provide <code>Console</code> and <code>Clock</code> manually, to reduce some boilerplate, we use <code>ZEnv</code> to satisfy some common base requirements.</p>
<p>By using <code>ZIO#provideCustomLayer</code> we only provide the <code>Logging</code> layer, and it returns a <code>ZIO</code> effect which only requires <code>ZEnv</code>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> mainEffect: <span class="hljs-type">ZIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] = myApp.provideCustomLayer(<span class="hljs-type">LoggingLive</span>.layer)
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/datatypes/core/runtime"><span class="arrow-prev">← </span><span>Runtime</span></a><a class="docs-next button" href="/docs/datatypes/contextual/has"><span>Has</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#zio-environment">ZIO Environment</a></li><li><a href="#contextual-data-types">Contextual Data Types</a><ul class="toc-headings"><li><a href="#has">Has</a></li><li><a href="#zlayer">ZLayer</a></li></ul></li><li><a href="#defining-services-in-oop">Defining Services in OOP</a></li><li><a href="#defining-services-in-zio">Defining Services in ZIO</a><ul class="toc-headings"><li><a href="#module-pattern-10">Module Pattern 1.0</a></li><li><a href="#module-pattern-20">Module Pattern 2.0</a></li></ul></li><li><a href="#dependency-injection-in-zio">Dependency Injection in ZIO</a><ul class="toc-headings"><li><a href="#building-dependency-graph">Building Dependency Graph</a></li><li><a href="#dependency-propagation">Dependency Propagation</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/navbar_brand.png" alt="ZIO"/></a><div><h5>GitHub</h5><a href="https://github.com/zio/zio"><img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github"/></a></div><div><h5>Chat with us on Discord</h5><a href="https://discord.gg/2ccFBr4"><img src="https://img.shields.io/discord/629491597070827530?logo=discord&amp;style=social" alt="discord"/></a></div><div><h5>Follow us on Twitter</h5><a href="https://twitter.com/zioscala"><img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&amp;style=social" alt="twitter"/></a></div><div><h5>Additional resources</h5><a href="https://javadoc.io/doc/dev.zio/zio_2.12/">Scaladoc of zio</a></div><div><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify"/></a></div></section><section class="copyright">Copyright © 2021 ZIO Maintainers</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0c94b59071da7001757d08ab43d9e033',
                indexName: 'zio',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>